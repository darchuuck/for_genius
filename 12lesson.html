<!DOCTYPE html>
<html>

<head>
    <title>Advanced functions</title>
</head>

<body>

    <button class="finished-but">start</button>

    <div>
        <button class="added-btn">Add to cart</button>
        <p class="js-added"></p>
    </div>

    <div>
        <button class="add">add</button>
        <button class="remove">remove</button>
    </div>
    <script>
        // const add = function () {
        //     console.log(2 + 3);
        // }
        // add();

        // function runTwice(param) {
        //     param();
        //     param()
        // }

        // runTwice(function () { console.log('12b') })


        const finishBtn = document.querySelector('.finished-but');
        finishBtn.addEventListener('click', () => {
            finishBtn.innerText = 'loading';
            setTimeout(() => {
                finishBtn.innerText = 'Finished';
            }, 1000)
        })



        let timeoutId;
        const addPar = document.querySelector('.js-added');
        const addBtn = document.querySelector('.added-btn');
        addBtn.addEventListener('click', () => {
            addPar.innerHTML = 'Added!';
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                addPar.innerHTML = '';
            }, 2000)

        })




        let copy = 2;
        let intervalId;
        let isDisplayingNotification;

        displayNotification();

        function displayNotification() {

            if (isDisplayingNotification) {
                return;
            }

            isDisplayingNotification = true;

            intervalId = setInterval(() => {
                if (document.title === "app") {
                    document.title = `(${copy}) New messages`;
                } else {
                    document.title = `app`;
                }

            }, 1000)
        }

        function stopNotification() {
            isDisplayingNotification = false;
            clearInterval(intervalId);

            document.title = 'app'
        }

        const addedBtn = document.querySelector('.add');
        addedBtn.addEventListener('click', () => {
            copy++;
            displayNotification()
        })

        const removedBtn = document.querySelector('.remove');
        removedBtn.addEventListener('click', () => {
            if (copy > 0) {
                copy--;
                if (copy === 0) {
                    stopNotification();
                }
            }
        })



        // part 2

        // const multiply = (num1, num2) => console.log(num1 * num2);
        // multiply(10, 2);
        // multiply(9, -1)


        // function countPositive(array) {
        //     let count = 0;
        //     array.forEach(element => {
        //         if (element > 0) {
        //             count++;
        //         }
        //     });
        //     return console.log(count);
        // }
        // countPositive([10, 2, 9, 0, -3])


        // function addNum(array, num) {
        //     return array.map(value => value * num)
        // }
        // console.log(addNum([10, 2, 9, 0, -3], 2));


        // function removeEggs(foods) {
        //     let removeEgg = 0;
        //     return foods.filter(value => {
        //         if (value === 'egg' && removeEgg < 2) {
        //             removeEgg++;
        //             return false;
        //         } else {
        //             return true;
        //         }
        //     }

        //     )
        // }
        // console.log(removeEggs(['egg', 'apple', 'egg', 'egg', 'ham']));
    </script>
</body>

</html>